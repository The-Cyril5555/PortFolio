/**
 * Mixins Responsive - Media Queries Centralisés
 * ==============================================
 *
 * Mixins SCSS pour gérer les breakpoints de manière cohérente
 * dans toute l'application.
 *
 * **Problème résolu :**
 * Avant ce fichier, chaque composant SCSS dupliquait les media queries :
 * - `@media (max-width: 768px)` répété 50+ fois
 * - `@media (max-width: 480px)` répété 30+ fois
 * - Incohérences entre hardcodé vs variables ($breakpoint-md)
 *
 * **Bénéfices :**
 * - ✅ Un seul endroit pour modifier les breakpoints
 * - ✅ API cohérente et sémantique
 * - ✅ Réduction de 90%+ de la duplication
 * - ✅ Code plus lisible et maintenable
 *
 * **Breakpoints (définis dans _variables.scss) :**
 * - xs:  320px  - Très petits mobiles
 * - sm:  640px  - Mobiles en mode portrait
 * - md:  768px  - Tablettes en mode portrait / grands mobiles
 * - lg:  1024px - Tablettes en mode paysage / petits laptops
 * - xl:  1280px - Laptops / desktops
 * - 2xl: 1536px - Grands écrans
 *
 * **Utilisation :**
 * ```scss
 * .hero-title {
 *   font-size: 80px;
 *
 *   @include mobile {
 *     font-size: 40px;
 *   }
 *
 *   @include tiny {
 *     font-size: 32px;
 *   }
 * }
 * ```
 *
 * **Migration :**
 * ```scss
 * // ❌ Avant (duplication, hardcodé)
 * @media (max-width: 768px) { ... }
 *
 * // ✅ Après (réutilisable, sémantique)
 * @include mobile { ... }
 * ```
 *
 * @author Cyril Bizouarn
 * @see _variables.scss - Définitions des breakpoints
 */

// ========================================
// Imports et Exports
// ========================================

// Forward permet d'exposer les variables et mixins aux modules qui importent responsive
// Cela permet aux composants d'importer uniquement 'responsive' pour tout avoir
@forward 'variables';
@forward 'mixins';

// Use permet d'utiliser les variables dans ce fichier
@use 'variables' as *;

// ========================================
// Mixins Mobile-First (min-width)
// ========================================
// Approche mobile-first : styles de base pour mobile,
// puis ajouts progressifs pour écrans plus grands

/**
 * Applique les styles à partir des petits mobiles (≥ 640px)
 *
 * @example
 * ```scss
 * .button {
 *   padding: 8px;
 *
 *   @include sm-up {
 *     padding: 12px;
 *   }
 * }
 * ```
 */
@mixin sm-up {
  @media (min-width: $breakpoint-sm) {
    @content;
  }
}

/**
 * Applique les styles à partir des tablettes (≥ 768px)
 *
 * **Cas d'usage :** Layout à 2 colonnes, menus desktop, etc.
 *
 * @example
 * ```scss
 * .grid {
 *   grid-template-columns: 1fr;
 *
 *   @include md-up {
 *     grid-template-columns: repeat(2, 1fr);
 *   }
 * }
 * ```
 */
@mixin md-up {
  @media (min-width: $breakpoint-md) {
    @content;
  }
}

/**
 * Applique les styles à partir des laptops (≥ 1024px)
 *
 * **Cas d'usage :** Layout complexe, sidebar, navigation étendue
 *
 * @example
 * ```scss
 * .sidebar {
 *   display: none;
 *
 *   @include lg-up {
 *     display: block;
 *   }
 * }
 * ```
 */
@mixin lg-up {
  @media (min-width: $breakpoint-lg) {
    @content;
  }
}

/**
 * Applique les styles à partir des grands écrans (≥ 1280px)
 *
 * @example
 * ```scss
 * .container {
 *   max-width: 1200px;
 *
 *   @include xl-up {
 *     max-width: 1400px;
 *   }
 * }
 * ```
 */
@mixin xl-up {
  @media (min-width: $breakpoint-xl) {
    @content;
  }
}

/**
 * Applique les styles à partir des très grands écrans (≥ 1536px)
 *
 * @example
 * ```scss
 * .hero {
 *   padding: 120px 0;
 *
 *   @include xxl-up {
 *     padding: 200px 0;
 *   }
 * }
 * ```
 */
@mixin xxl-up {
  @media (min-width: $breakpoint-2xl) {
    @content;
  }
}

// ========================================
// Mixins Desktop-First (max-width)
// ========================================
// Approche desktop-first : styles de base pour desktop,
// puis adaptations pour écrans plus petits

/**
 * Applique les styles jusqu'aux tablettes (< 1024px)
 *
 * **Équivalent :** `@media (max-width: 1023px)`
 *
 * @example
 * ```scss
 * .nav-desktop {
 *   display: flex;
 *
 *   @include lg-down {
 *     display: none;
 *   }
 * }
 * ```
 */
@mixin lg-down {
  @media (max-width: #{$breakpoint-lg - 1px}) {
    @content;
  }
}

/**
 * Applique les styles jusqu'aux mobiles (< 768px)
 *
 * **⭐ Mixin le plus utilisé dans le projet**
 *
 * Remplace tous les `@media (max-width: 768px)` de l'ancien code.
 *
 * **Équivalent :** `@media (max-width: 767px)`
 *
 * @example
 * ```scss
 * .hero-title {
 *   font-size: 80px;
 *
 *   @include md-down {
 *     font-size: 48px;
 *   }
 * }
 * ```
 */
@mixin md-down {
  @media (max-width: #{$breakpoint-md - 1px}) {
    @content;
  }
}

/**
 * Applique les styles jusqu'aux petits mobiles (< 640px)
 *
 * **Équivalent :** `@media (max-width: 639px)`
 *
 * @example
 * ```scss
 * .card {
 *   padding: 24px;
 *
 *   @include sm-down {
 *     padding: 16px;
 *   }
 * }
 * ```
 */
@mixin sm-down {
  @media (max-width: #{$breakpoint-sm - 1px}) {
    @content;
  }
}

// ========================================
// Mixins Sémantiques (alias lisibles)
// ========================================
// Noms plus expressifs pour améliorer la lisibilité du code

/**
 * Styles pour mobiles uniquement (< 768px)
 *
 * **Alias de :** `md-down`
 *
 * **⭐ Recommandé** pour la clarté sémantique
 *
 * @example
 * ```scss
 * .menu {
 *   @include mobile {
 *     position: fixed;
 *     top: 0;
 *     left: 0;
 *   }
 * }
 * ```
 */
@mixin mobile {
  @include md-down {
    @content;
  }
}

/**
 * Styles pour tablettes uniquement (< 1024px)
 *
 * **Alias de :** `lg-down`
 *
 * @example
 * ```scss
 * .sidebar {
 *   @include tablet {
 *     width: 200px;
 *   }
 * }
 * ```
 */
@mixin tablet {
  @include lg-down {
    @content;
  }
}

/**
 * Styles pour desktop uniquement (≥ 1024px)
 *
 * **Alias de :** `lg-up`
 *
 * @example
 * ```scss
 * .hero {
 *   @include desktop {
 *     min-height: 100vh;
 *   }
 * }
 * ```
 */
@mixin desktop {
  @include lg-up {
    @content;
  }
}

/**
 * Styles pour très petits mobiles (< 480px)
 *
 * **Équivalent :** `@media (max-width: 480px)`
 *
 * Remplace tous les `@media (max-width: 480px)` de l'ancien code.
 *
 * **Cas d'usage :** iPhone SE, petits Android, typographie réduite
 *
 * @example
 * ```scss
 * .hero-title {
 *   font-size: 48px;
 *
 *   @include tiny {
 *     font-size: 32px;
 *   }
 * }
 * ```
 */
@mixin tiny {
  @media (max-width: 480px) {
    @content;
  }
}

// ========================================
// Mixins de Plage (between)
// ========================================
// Pour cibler des plages spécifiques de breakpoints

/**
 * Styles pour mobiles uniquement (entre 0 et 767px)
 *
 * Exclut les tablettes et desktops
 *
 * @example
 * ```scss
 * .mobile-only-banner {
 *   @include mobile-only {
 *     display: block;
 *   }
 * }
 * ```
 */
@mixin mobile-only {
  @media (max-width: #{$breakpoint-md - 1px}) {
    @content;
  }
}

/**
 * Styles pour tablettes uniquement (entre 768px et 1023px)
 *
 * Exclut les mobiles et desktops
 *
 * @example
 * ```scss
 * .tablet-grid {
 *   @include tablet-only {
 *     grid-template-columns: repeat(2, 1fr);
 *   }
 * }
 * ```
 */
@mixin tablet-only {
  @media (min-width: $breakpoint-md) and (max-width: #{$breakpoint-lg - 1px}) {
    @content;
  }
}

/**
 * Styles pour desktop uniquement (≥ 1024px)
 *
 * Exclut les mobiles et tablettes
 *
 * @example
 * ```scss
 * .desktop-sidebar {
 *   @include desktop-only {
 *     width: 300px;
 *   }
 * }
 * ```
 */
@mixin desktop-only {
  @media (min-width: $breakpoint-lg) {
    @content;
  }
}

// ========================================
// Mixins Utilitaires
// ========================================

/**
 * Mixin personnalisé pour breakpoint custom
 *
 * À utiliser uniquement si les mixins prédéfinis ne conviennent pas.
 *
 * @param {String} $breakpoint - Valeur du breakpoint (ex: '900px', '50em')
 * @param {String} $direction - 'up' (min-width) ou 'down' (max-width)
 *
 * @example
 * ```scss
 * .element {
 *   @include custom-breakpoint(900px, 'down') {
 *     display: none;
 *   }
 * }
 * ```
 */
@mixin custom-breakpoint($breakpoint, $direction: 'down') {
  @if $direction == 'up' {
    @media (min-width: $breakpoint) {
      @content;
    }
  } @else {
    @media (max-width: $breakpoint) {
      @content;
    }
  }
}

/**
 * Mixin pour modes paysage uniquement
 *
 * **Cas d'usage :** Ajustements spécifiques pour mobiles en paysage
 *
 * @example
 * ```scss
 * .hero {
 *   @include landscape {
 *     height: 100vh;
 *   }
 * }
 * ```
 */
@mixin landscape {
  @media (orientation: landscape) {
    @content;
  }
}

/**
 * Mixin pour modes portrait uniquement
 *
 * @example
 * ```scss
 * .menu {
 *   @include portrait {
 *     flex-direction: column;
 *   }
 * }
 * ```
 */
@mixin portrait {
  @media (orientation: portrait) {
    @content;
  }
}

/**
 * Mixin pour écrans haute résolution (Retina)
 *
 * **Cas d'usage :** Optimisation d'images, bordures fines
 *
 * @example
 * ```scss
 * .logo {
 *   background-image: url('logo.png');
 *
 *   @include retina {
 *     background-image: url('logo@2x.png');
 *     background-size: contain;
 *   }
 * }
 * ```
 */
@mixin retina {
  @media (-webkit-min-device-pixel-ratio: 2),
         (min-resolution: 192dpi),
         (min-resolution: 2dppx) {
    @content;
  }
}

/**
 * Mixin pour utilisateurs préférant les animations réduites
 *
 * **Accessibilité :** Respecte la préférence système de l'utilisateur
 *
 * @example
 * ```scss
 * .animated-element {
 *   transition: all 0.3s;
 *
 *   @include reduced-motion {
 *     transition: none;
 *   }
 * }
 * ```
 */
@mixin reduced-motion {
  @media (prefers-reduced-motion: reduce) {
    @content;
  }
}

/**
 * Mixin pour mode sombre système
 *
 * **Cas d'usage :** Support du dark mode automatique
 *
 * @example
 * ```scss
 * .card {
 *   background: white;
 *   color: black;
 *
 *   @include dark-mode {
 *     background: black;
 *     color: white;
 *   }
 * }
 * ```
 */
@mixin dark-mode {
  @media (prefers-color-scheme: dark) {
    @content;
  }
}

// ========================================
// Exemples d'Utilisation Recommandés
// ========================================

/**
 * Exemple de migration complète d'un composant :
 *
 * ```scss
 * // ❌ AVANT (duplication, hardcodé, incohérent)
 * .hero-title {
 *   font-size: 80px;
 *
 *   @media (max-width: 1024px) {
 *     font-size: 60px;
 *   }
 *
 *   @media (max-width: 768px) {
 *     font-size: 48px;
 *   }
 *
 *   @media (max-width: 480px) {
 *     font-size: 32px;
 *   }
 * }
 *
 * // ✅ APRÈS (réutilisable, sémantique, cohérent)
 * .hero-title {
 *   font-size: 80px;
 *
 *   @include tablet {
 *     font-size: 60px;
 *   }
 *
 *   @include mobile {
 *     font-size: 48px;
 *   }
 *
 *   @include tiny {
 *     font-size: 32px;
 *   }
 * }
 * ```
 */

/**
 * Ordre recommandé des breakpoints dans les composants :
 *
 * ```scss
 * .element {
 *   // Styles de base (mobile-first ou desktop-first)
 *   property: value;
 *
 *   // Du plus grand au plus petit (desktop-first)
 *   @include xl-up { ... }
 *   @include desktop { ... }
 *   @include tablet { ... }
 *   @include mobile { ... }
 *   @include tiny { ... }
 *
 *   // OU du plus petit au plus grand (mobile-first)
 *   @include tiny { ... }
 *   @include mobile { ... }
 *   @include tablet { ... }
 *   @include desktop { ... }
 *   @include xl-up { ... }
 * }
 * ```
 */
